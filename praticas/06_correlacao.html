<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Flávia da Fonseca Feitosa">
<meta name="author" content="Beatriz Milz">

<title>6&nbsp; Prática - Correlação – Análise de dados para o Planejamento Territorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../praticas/07_regressao-linear.html" rel="next">
<link href="../praticas/05_intervalo-de-confianca.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5fd9db47a040b21ac2cac9a0b3b722ba.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../praticas/06_correlacao.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Prática - Correlação</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Análise de dados para o Planejamento Territorial</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial" title="Código fonte" class="quarto-navigation-tool px-1" aria-label="Código fonte"><i class="bi bi-github"></i></a>
    <a href="../analise-de-dados-para-planejamento-territorial.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introdução</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/01_intro_r_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução ao R e RStudio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/02_conceitos-basicos-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Conceitos básicos do R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/03_analise-exploratoria.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Análise exploratória de dados - Parte 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/04_analise-exploratoria-ii.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Análise exploratória de dados - Parte 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/05_intervalo-de-confianca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Prática - Intervalo de confiança</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/06_correlacao.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Prática - Correlação</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/07_regressao-linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Regressão Linear</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../praticas/08_regressao-espacial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Prática - Regressão Espacial</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Apêndices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apendices/00_erros_frequentes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Erros e <em>warnings</em> frequentes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../apendices/00_sugestao-videos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Sugestão de vídeos, posts, e outros materiais</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#carregando-os-pacotes" id="toc-carregando-os-pacotes" class="nav-link active" data-scroll-target="#carregando-os-pacotes"><span class="header-section-number">6.1</span> Carregando os pacotes</a></li>
  <li><a href="#importando-os-dados" id="toc-importando-os-dados" class="nav-link" data-scroll-target="#importando-os-dados"><span class="header-section-number">6.2</span> Importando os dados</a></li>
  <li><a href="#pergunta-norteadora" id="toc-pergunta-norteadora" class="nav-link" data-scroll-target="#pergunta-norteadora"><span class="header-section-number">6.3</span> Pergunta norteadora</a></li>
  <li><a href="#gráfico-de-dispersão" id="toc-gráfico-de-dispersão" class="nav-link" data-scroll-target="#gráfico-de-dispersão"><span class="header-section-number">6.4</span> Gráfico de dispersão</a></li>
  <li><a href="#correlação" id="toc-correlação" class="nav-link" data-scroll-target="#correlação"><span class="header-section-number">6.5</span> Correlação</a></li>
  <li><a href="#matriz-de-correlação" id="toc-matriz-de-correlação" class="nav-link" data-scroll-target="#matriz-de-correlação"><span class="header-section-number">6.6</span> Matriz de correlação</a>
  <ul class="collapse">
  <li><a href="#visualizando-a-matriz-de-correlação" id="toc-visualizando-a-matriz-de-correlação" class="nav-link" data-scroll-target="#visualizando-a-matriz-de-correlação"><span class="header-section-number">6.6.1</span> Visualizando a matriz de correlação</a></li>
  </ul></li>
  <li><a href="#extra-teste-de-significância" id="toc-extra-teste-de-significância" class="nav-link" data-scroll-target="#extra-teste-de-significância"><span class="header-section-number">6.7</span> EXTRA: Teste de significância</a>
  <ul class="collapse">
  <li><a href="#statistic" id="toc-statistic" class="nav-link" data-scroll-target="#statistic"><span class="header-section-number">6.7.1</span> <code>statistic</code></a></li>
  <li><a href="#parameter" id="toc-parameter" class="nav-link" data-scroll-target="#parameter"><span class="header-section-number">6.7.2</span> <code>parameter</code></a></li>
  <li><a href="#p.value-ou-valor-p" id="toc-p.value-ou-valor-p" class="nav-link" data-scroll-target="#p.value-ou-valor-p"><span class="header-section-number">6.7.3</span> <code>p.value</code> ou valor-p</a></li>
  <li><a href="#estimate" id="toc-estimate" class="nav-link" data-scroll-target="#estimate"><span class="header-section-number">6.7.4</span> <code>estimate</code></a></li>
  <li><a href="#null.value" id="toc-null.value" class="nav-link" data-scroll-target="#null.value"><span class="header-section-number">6.7.5</span> <code>null.value</code></a></li>
  <li><a href="#alternative" id="toc-alternative" class="nav-link" data-scroll-target="#alternative"><span class="header-section-number">6.7.6</span> <code>alternative</code></a></li>
  <li><a href="#method" id="toc-method" class="nav-link" data-scroll-target="#method"><span class="header-section-number">6.7.7</span> <code>method</code></a></li>
  <li><a href="#data.name" id="toc-data.name" class="nav-link" data-scroll-target="#data.name"><span class="header-section-number">6.7.8</span> <code>data.name</code></a></li>
  <li><a href="#conf.int" id="toc-conf.int" class="nav-link" data-scroll-target="#conf.int"><span class="header-section-number">6.7.9</span> <code>conf.int</code></a></li>
  </ul></li>
  <li><a href="#materiais-complementares" id="toc-materiais-complementares" class="nav-link" data-scroll-target="#materiais-complementares"><span class="header-section-number">6.8</span> Materiais complementares</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/edit/main/praticas/06_correlacao.qmd" class="toc-action"><i class="bi bi-github"></i>Editar essa página</a></li><li><a href="https://github.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/issues/new" class="toc-action"><i class="bi empty"></i>Criar uma issue</a></li><li><a href="https://github.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/blob/main/praticas/06_correlacao.qmd" class="toc-action"><i class="bi empty"></i>Ver o código fonte</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Prática - Correlação</span></h1>
<p class="subtitle lead">Explorando a relação linear entre duas variáveis numéricas</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Docentes</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://sig.ufabc.edu.br/sigaa/public/docente/portal.jsf?siape=2064223">Flávia da Fonseca Feitosa</a> <a href="mailto:flavia.feitosa@ufabc.edu.br" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
             <p><a href="https://www.beamilz.com/">Beatriz Milz</a> <a href="mailto:milz.bea@gmail.com" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Os conceitos foram apresentados na aula teórica. A seguir, temos uma prática para aplicar esses conceitos. É importante que você tenha assistido à aula antes de realizar esta prática, pois ela se baseia nos conceitos discutidos.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Essa prática foi muito inspirada pela prática preparada pelo <a href="https://luisfelipebr.github.io/mti2020/roteiros/roteiro4.html">Luis Felipe Bortolatto da Cunha</a> para edições passadas dessa disciplina.</p>
</div>
</div>
<section id="carregando-os-pacotes" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="carregando-os-pacotes"><span class="header-section-number">6.1</span> Carregando os pacotes</h2>
<p>Os pacotes necessários para essa prática são:</p>
<ul>
<li><p><code>tidyverse</code>: para manipulação e visualização de dados;</p></li>
<li><p><code>corrplot</code> e <code>GGally</code>: para visualização de matrizes de correlação;</p></li>
</ul>
<p>Podemos instalar os pacotes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"corrplot"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"GGally"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E então carregá-los:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>corrplot 0.95 loaded</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'GGally':
  method from   
  +.gg   ggplot2</code></pre>
</div>
</div>
</section>
<section id="importando-os-dados" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="importando-os-dados"><span class="header-section-number">6.2</span> Importando os dados</h2>
<p>Para executar a análise de correlação vamos utilizar dados demográficos e de consumo de água de 2010, para uma amostra de municípios, extraídos do Censo Demográfico (IBGE) e do Sistema Nacional de Informações sobre Saneamento (SNIS), para investigar se <strong>o consumo de água está correlacionado com a renda</strong>, conforme análise apresentada por <a href="https://abrh.s3.sa-east-1.amazonaws.com/Sumarios/155/ea6a64ffc76c211d6b7749ab8444b626_bf87b0b219dd784ffa049f367598e626.pdf">Carmo et al., 2013</a>.</p>
<p>Download: <a href="https://raw.githubusercontent.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/refs/heads/main/praticas/dados/agua_rede1.csv">Clique aqui caso queira fazer o download dos dados</a></p>
<p>Atenção: os dados estão no formato CSV, que é um formato de texto separado por vírgulas. O <code>read_csv2</code> é usado para ler arquivos CSV que usam ponto e vírgula (<code>;</code>) como separador de campos, o que é o caso deste arquivo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">"https://raw.githubusercontent.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/refs/heads/main/praticas/dados/agua_rede1.csv"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Using "','" as decimal and "'.'" as grouping mark. Use `read_delim()` for more control.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 5566 Columns: 19
── Column specification ────────────────────────────────────────────────────────
Delimiter: ";"
chr  (4): nome_mun, uf, regiao, idh_class
dbl (15): id_ibge, domicil, rede, proprede, id_snis, pib, rendapita, gini, i...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Vamos dar uma olhada para conhecer a estrutura dos dados e as variáveis disponíveis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dados)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 5,566
Columns: 19
$ id_ibge   &lt;dbl&gt; 3548807, 4214904, 3303302, 3205309, 3547304, 4205407, 314480…
$ domicil   &lt;dbl&gt; 50492, 1312, 169237, 108515, 31610, 147437, 24203, 508456, 7…
$ rede      &lt;dbl&gt; 50472, 412, 164768, 107715, 28728, 137984, 22436, 505149, 73…
$ proprede  &lt;dbl&gt; 0.9996038976, 0.3140243902, 0.9735932450, 0.9926277473, 0.90…
$ id_snis   &lt;dbl&gt; 354880, 421490, 330330, 320530, 354730, 420540, 314480, 4314…
$ nome_mun  &lt;chr&gt; "São Caetano do Sul", "Rio Fortuna", "Niterói", "Vitória", "…
$ uf        &lt;chr&gt; "SP", "SC", "RJ", "ES", "SP", "SC", "MG", "RS", "DF", "SP", …
$ regiao    &lt;chr&gt; "Sudeste", "Sul", "Sudeste", "Sudeste", "Sudeste", "Sul", "S…
$ pib       &lt;dbl&gt; 6694384.00, 39035.65, 5831066.00, 9270129.00, 1085714.00, 42…
$ rendapita &lt;dbl&gt; 2008.98, 1570.54, 1951.11, 1820.97, 1798.50, 1770.29, 1709.8…
$ gini      &lt;dbl&gt; 0.5480, 0.5638, 0.5983, 0.6124, 0.6858, 0.5474, 0.6914, 0.61…
$ idh       &lt;dbl&gt; 0.919, 0.822, 0.886, 0.856, 0.853, 0.875, 0.821, 0.865, 0.84…
$ idh_class &lt;chr&gt; "Muito alto", "Alto", "Alto", "Alto", "Alto", "Alto", "Alto"…
$ ge012     &lt;dbl&gt; 149263, 4446, 487562, 327801, 108813, 421240, 80998, 1409351…
$ ag001     &lt;dbl&gt; 149263, 1774, 487562, 327801, 102006, 413263, 79232, 1409351…
$ ag020     &lt;dbl&gt; 9666.74, 58.94, 31499.85, 19825.98, 6207.20, 18464.15, 4185.…
$ ag022     &lt;dbl&gt; 56873, 501, 154431, 108174, 30583, 156279, 25012, 518953, 85…
$ consumo1  &lt;dbl&gt; 64.763136, 13.256860, 64.606860, 60.481756, 57.044655, 43.83…
$ consumo2  &lt;dbl&gt; 64.76314, 33.22435, 64.60686, 60.48176, 60.85132, 44.67893, …</code></pre>
</div>
</div>
<p>A tabela abaixo apresenta uma descrição de cada variável.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 47%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th>Código</th>
<th>Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>id_ibge</td>
<td>Código IBGE (7 dígitos)</td>
</tr>
<tr class="even">
<td>domicil</td>
<td>Quantidade de Domicílios</td>
</tr>
<tr class="odd">
<td>rede</td>
<td>Quantidade de Domicílios com Acesso à Rede Geral de Água</td>
</tr>
<tr class="even">
<td>proprede</td>
<td>Proporção de Domicílios com com Acesso à Rede Geral de Água (REDE/DOMICIL)</td>
</tr>
<tr class="odd">
<td>id_snins</td>
<td>Código IBGE (6 dígitos)</td>
</tr>
<tr class="even">
<td>NOME_MUN</td>
<td>Nome do Município</td>
</tr>
<tr class="odd">
<td>uf</td>
<td>Unidade da Federação</td>
</tr>
<tr class="even">
<td>regiao</td>
<td>Região do País</td>
</tr>
<tr class="odd">
<td>pib</td>
<td>Produto Interno Bruto 2010</td>
</tr>
<tr class="even">
<td>rendapita</td>
<td>Renda per Capita 2010</td>
</tr>
<tr class="odd">
<td>gini</td>
<td>Índice GINI 2010</td>
</tr>
<tr class="even">
<td>idh</td>
<td>Índice de Desenvolvimento Humano 2010</td>
</tr>
<tr class="odd">
<td>idh_class</td>
<td>Classificação do Índice de Desenvolvimento Humano 2010: Muito Alto &gt;= 0,9; Alto &gt;= 0,8; Médio &gt;= 0,5; Baixo &lt; 0,5.</td>
</tr>
<tr class="even">
<td>ge012</td>
<td>População Total Residente no Município</td>
</tr>
<tr class="odd">
<td>ag001</td>
<td>População Total Atendida com Abastecimento de Água</td>
</tr>
<tr class="even">
<td>ag020</td>
<td>Volume Micromedido nas Economias Residenciais Ativas de Agua - 1.000 m3/ano</td>
</tr>
<tr class="odd">
<td>ag022</td>
<td>Quantidade de Economias Residenciais Ativas Micromedidas</td>
</tr>
<tr class="even">
<td>consumo1</td>
<td>Consumo de Água per capita - População Total - m3/ano (AG020/GE012)</td>
</tr>
<tr class="odd">
<td>consumo2</td>
<td>Consumo de Água per capita - População Atendida - m3/ano (AG020/AG001)</td>
</tr>
</tbody>
</table>
</section>
<section id="pergunta-norteadora" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="pergunta-norteadora"><span class="header-section-number">6.3</span> Pergunta norteadora</h2>
<p>A pergunta que vamos investigar é: <strong>o consumo de água (per capita) está correlacionado com a renda (per capita)?</strong></p>
<p>As variáveis que vamos utilizar para responder a essa pergunta são:</p>
<ul>
<li><p><code>consumo1</code>: Consumo de água per capita - População Total - m3/ano (AG020/GE012);</p></li>
<li><p><code>rendapita</code>: Renda per capita.</p></li>
</ul>
<p>Importante: a correlação é utilizada para investigar a relação entre duas <strong>variáveis numéricas</strong>.</p>
</section>
<section id="gráfico-de-dispersão" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="gráfico-de-dispersão"><span class="header-section-number">6.4</span> Gráfico de dispersão</h2>
<p>O gráfico de dispersão é uma representação gráfica que mostra a relação entre duas variáveis numéricas. Cada ponto no gráfico representa um par de valores das duas variáveis.</p>
<p>Por exemplo, podemos representar as variáveis <code>rendapita</code> e <code>consumo1</code> em um gráfico de dispersão, deixando uma transparência nos pontos (<code>alpha = 0.2</code>) para facilitar a visualização de pontos sobrepostos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> rendapita, <span class="at">y =</span> consumo1)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tite =</span> <span class="st">"Relação entre Renda per Capita e Consumo de Água per Capita"</span>,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Dados de 2010 para Municípios Brasileiros"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Fonte: SNIS e IBGE"</span>,</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Renda per capita (R$)"</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Consumo de água per capita (m³/ano)"</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1149 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_correlacao_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aviso
</div>
</div>
<div class="callout-body-container callout-body">
<p>Veja que o <code>ggplot</code> apresentou um aviso (<em>warning</em>):</p>
<blockquote class="blockquote">
<p>Warning: Removed 1149 rows containing missing values or values outside the scale range (<code>geom_point()</code>).</p>
</blockquote>
<p>Quando estamos criando um gráfico de dispersão, precisamos que ambas as variáveis estejam presentes para cada ponto. Se uma das variáveis tiver valores ausentes (NA) ou fora do intervalo esperado, esses pontos serão removidos do gráfico. Isso é normal e esperado, pois o <code>ggplot</code> não pode plotar pontos com valores ausentes.</p>
</div>
</div>
<p>Interpretando o gráfico, podemos observar que há uma <strong>tendência</strong> de que, <strong>à medida que a renda per capita aumenta, o consumo de água per capita também tende a aumentar</strong>.</p>
<p>No entanto, essa relação não é perfeita e existem pontos que se desviam dessa tendência. Por exemplo: alguns municípios apresentam maiores valores de consumo de água per capita, mesmo com rendas per capita mais baixas, enquanto outros municípios com rendas mais altas apresentam consumos de água per capita mais baixos.</p>
<p>Porém, o foco neste momento é visualizar as tendências.</p>
<p>Para quantificar essa relação, podemos calcular a correlação entre as duas variáveis.</p>
</section>
<section id="correlação" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="correlação"><span class="header-section-number">6.5</span> Correlação</h2>
<p>A correlação é uma medida estatística que indica a força e a direção de uma <strong>relação linear</strong> entre duas <strong>variáveis numéricas</strong>. o <strong>coeficiente de correlação de Pearson</strong> apresenta valores entre <code>-1</code> e <code>1</code>, onde:</p>
<ul>
<li><p><code>1</code> indica uma correlação positiva perfeita (quando uma variável aumenta, a outra também aumenta);</p></li>
<li><p><code>-1</code> indica uma correlação negativa perfeita (quando uma variável aumenta, a outra diminui);</p></li>
<li><p><code>0</code> indica que não há correlação linear entre as variáveis.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Um site divertido para brincar com correlações é o <a href="https://www.guessthecorrelation.com/">Guess the Correlation</a>. Ele apresenta gráficos de dispersão e você deve adivinhar o coeficiente de correlação!</p>
<p><img src="images/06_guess_the_correlation.png" class="img-fluid"></p>
</div>
</div>
<p>Para calcular a correlação entre as variáveis <code>consumo1</code> e <code>rendapita</code>, podemos usar a função <code>cor()</code> do R, que calcula o coeficiente de correlação, e podemos indicar alguns argumentos:</p>
<ul>
<li><p><code>x</code> e <code>y</code>: as duas variáveis numéricas que queremos correlacionar;</p></li>
<li><p><code>method</code>: o método de correlação a ser utilizado (por padrão, é o coeficiente de correlação de Pearson, porém também é possível calcular utilizando os métodos <code>"spearman"</code> e <code>"kendall"</code>);</p></li>
<li><p><code>use</code>: como lidar com valores ausentes (NA). Por exemplo, podemos usar <code>use = "complete.obs"</code> para remover os casos com valores ausentes antes de calcular a correlação.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>correlacao <span class="ot">&lt;-</span> <span class="fu">cor</span>(<span class="at">x =</span> dados<span class="sc">$</span>rendapita, <span class="co"># variável </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> dados<span class="sc">$</span>consumo1,  <span class="co"># variável</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"pearson"</span>, <span class="co"># método de correlação</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">use =</span> <span class="st">"complete.obs"</span> <span class="co"># usar apenas observações completas</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>correlacao</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6012537</code></pre>
</div>
</div>
<p>A correlação entre as variáveis renda e o consumo de água per capita é de 0.6, indicando a mesma <strong>correlação positiva</strong> que o gráfico de dispersão permitiu visualizar.</p>
</section>
<section id="matriz-de-correlação" class="level2" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="matriz-de-correlação"><span class="header-section-number">6.6</span> Matriz de correlação</h2>
<p>Até agora, calculamos a correlação entre duas variáveis específicas. No entanto, podemos calcular a correlação entre várias variáveis numéricas de uma vez, criando uma matriz de correlação.</p>
<p>Vamos recapitular alguns cuidados: - Correlação deve ser usada apenas com <strong>variáveis numéricas</strong>; - Não devemos usar variáveis de identificação, como códigos IBGE, nomes de municípios, etc;</p>
<p>Para construir uma matriz de correlação, primeiro é necessário selecionar as variáveis que desejamos investigar (com a função <code>select()</code>), para depois calcular o coeficiente de correlação entre cada dupla de variáveis (com a função <code>cor()</code>).</p>
<p>Vamos criar um objeto com as variáveis que queremos investigar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dados_selecionados <span class="ot">&lt;-</span> dados <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rendapita, pib, gini, idh, consumo1, consumo2, proprede)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Agora podemos calcular a matriz de correlação entre essas variáveis, utilizando a função <code>cor()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dados_selecionados <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">"pearson"</span>, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           rendapita        pib        gini        idh   consumo1    consumo2
rendapita  1.0000000 0.22623371 -0.21476760  0.7415117  0.6012537  0.49269163
pib        0.2262337 1.00000000  0.09083846  0.1190256  0.1176077  0.06518107
gini      -0.2147676 0.09083846  1.00000000 -0.3259986 -0.2680246 -0.25814509
idh        0.7415117 0.11902559 -0.32599859  1.0000000  0.5143510  0.42554311
consumo1   0.6012537 0.11760770 -0.26802459  0.5143510  1.0000000  0.85700512
consumo2   0.4926916 0.06518107 -0.25814509  0.4255431  0.8570051  1.00000000
proprede   0.4012507 0.11643021 -0.17370841  0.3731320  0.6117510  0.35458719
            proprede
rendapita  0.4012507
pib        0.1164302
gini      -0.1737084
idh        0.3731320
consumo1   0.6117510
consumo2   0.3545872
proprede   1.0000000</code></pre>
</div>
</div>
<p>Esse resultado pode ser mais fácil de ser interpretado caso os valores sejam arredondados. Podemos fazer isso com a função <code>round()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dados_selecionados <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">"pearson"</span>, <span class="at">use =</span> <span class="st">"complete.obs"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          rendapita  pib  gini   idh consumo1 consumo2 proprede
rendapita      1.00 0.23 -0.21  0.74     0.60     0.49     0.40
pib            0.23 1.00  0.09  0.12     0.12     0.07     0.12
gini          -0.21 0.09  1.00 -0.33    -0.27    -0.26    -0.17
idh            0.74 0.12 -0.33  1.00     0.51     0.43     0.37
consumo1       0.60 0.12 -0.27  0.51     1.00     0.86     0.61
consumo2       0.49 0.07 -0.26  0.43     0.86     1.00     0.35
proprede       0.40 0.12 -0.17  0.37     0.61     0.35     1.00</code></pre>
</div>
</div>
<section id="visualizando-a-matriz-de-correlação" class="level3" data-number="6.6.1">
<h3 data-number="6.6.1" class="anchored" data-anchor-id="visualizando-a-matriz-de-correlação"><span class="header-section-number">6.6.1</span> Visualizando a matriz de correlação</h3>
<p>Também é possível visualizar a matriz de correlação construindo um gráfico, usando a função <code>corrplot()</code> do pacote <code>corrplot</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dados_selecionados <span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">"pearson"</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">use =</span> <span class="st">"complete.obs"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">corrplot</span>(<span class="at">method =</span> <span class="st">"color"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="06_correlacao_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A função <code>corrplot()</code> apresenta o argumento <code>method</code> permite escolher o tipo de visualização. Os valores podem ser: <code>"circle"</code>, <code>"square"</code>, <code>"ellipse"</code>, <code>"number"</code>, <code>"shade"</code>, <code>"color"</code> e <code>"pie"</code>.</p>
<p>Outra forma de visualizar a matriz de correlação é utilizando a função <code>ggpairs()</code> do pacote <code>GGally</code>, que cria uma matriz de gráficos de dispersão, histogramas e correlações entre as variáveis selecionadas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>plot_ggpair <span class="ot">&lt;-</span> dados <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rendapita, gini, idh, consumo1) <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  GGally<span class="sc">::</span><span class="fu">ggpairs</span>()</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>plot_ggpair</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><img src="images/06_ggpair.png" class="img-fluid"></p>
</section>
</section>
<section id="extra-teste-de-significância" class="level2" data-number="6.7">
<h2 data-number="6.7" class="anchored" data-anchor-id="extra-teste-de-significância"><span class="header-section-number">6.7</span> EXTRA: Teste de significância</h2>
<p>Será que 0.6 é significativo? Se fosse -0.3, seria significativo? E se fosse 0.1? Uma forma de verificar isso é através de um teste de hipótese. Nesse teste, avaliamos se a correlação observada é tão próxima de zero que podemos considerar que o que observamos é fruto do acaso.</p>
<p>Para testar a significância da correlação entre duas variáveis, podemos usar o teste de hipótese para o coeficiente de correlação de Pearson. Esse teste nos dá um guia para avaliar se a correlação observada é significativa.</p>
<p>É importante definir antes de realizar o teste de significância qual é a hipótese nula e a hipótese alternativa:</p>
<ul>
<li><p><strong>Hipótese nula (H0)</strong>: Não há correlação entre as duas variáveis (coeficiente de correlação é igual a zero).</p></li>
<li><p><strong>Hipótese alternativa (H1)</strong>: Há correlação entre as duas variáveis (coeficiente de correlação é diferente de zero, podendo ser positivo ou negativo).</p></li>
</ul>
<p>Para testar a significâcia do coeficiente de correlação de Pearson podemos usar a função <code>cor.test()</code>, especificando os argumentos:</p>
<ul>
<li><p><code>x</code> e <code>y</code>: as duas variáveis numéricas que queremos correlacionar;</p></li>
<li><p><code>method</code>: o método de correlação a ser utilizado. Por padrão, é o coeficiente de correlação de Pearson, mas também é possível calcular utilizando os métodos <code>"spearman"</code> e <code>"kendall"</code>. Ao mudar o método, também mudamos o teste de hipótese realizado;</p></li>
<li><p><code>alternative</code>: o tipo de teste de hipótese a ser realizado. Os valores possíveis são <code>"two.sided"</code> (bilateral), <code>"less"</code> (unilateral à esquerda: valor negativo) e <code>"greater"</code> (unilateral à direita: valor positivo).</p></li>
<li><p><code>conf.level</code>: o nível de confiança para o intervalo de confiança do coeficiente de correlação (por padrão, é 0.95, ou seja, 95% de confiança).</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(<span class="at">x =</span> dados<span class="sc">$</span>rendapita, <span class="co"># variável </span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> dados<span class="sc">$</span>consumo1,  <span class="co"># variável</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">method =</span> <span class="st">"pearson"</span>, <span class="co"># método de correlação</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">alternative =</span> <span class="st">"two.sided"</span>, <span class="co"># teste bilateral</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">conf.level =</span> <span class="fl">0.95</span>, <span class="co"># nível de confiança</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>resultado_cor_test</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  dados$rendapita and dados$consumo1
t = 49.997, df = 4415, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.5820832 0.6197561
sample estimates:
      cor 
0.6012537 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(resultado_cor_test)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  estimate statistic p.value parameter conf.low conf.high method     alternative
     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      
1    0.601      50.0       0      4415    0.582     0.620 Pearson's… two.sided  </code></pre>
</div>
</div>
<p>Os resultados de testes estatísticos no R são confusos no início. O objeto criado é uma lista, e podemos acessar os componentes dessa lista para obter informações específicas utilizando o operador <code>$</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(resultado_cor_test)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "statistic"   "parameter"   "p.value"     "estimate"    "null.value" 
[6] "alternative" "method"      "data.name"   "conf.int"   </code></pre>
</div>
</div>
<section id="statistic" class="level3" data-number="6.7.1">
<h3 data-number="6.7.1" class="anchored" data-anchor-id="statistic"><span class="header-section-number">6.7.1</span> <code>statistic</code></h3>
<p>O componente <code>statistic</code> é o valor do teste estatístico usado para calcular o valor-p.&nbsp;No caso da correlação de Pearson, esse valor é calculado com base no valor de <code>t</code>, por conta das propriedades da estatística de Pearson. Esses valores não costumam ser interpretados isoladamente neste contexto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>statistic</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       t 
49.99709 </code></pre>
</div>
</div>
</section>
<section id="parameter" class="level3" data-number="6.7.2">
<h3 data-number="6.7.2" class="anchored" data-anchor-id="parameter"><span class="header-section-number">6.7.2</span> <code>parameter</code></h3>
<p>O componente <code>parameter</code> indica os parâmetros associados ao teste. No caso da correlação de Pearson, são os graus de liberdade, que é calculado como <code>n - 2</code>, onde <code>n</code> é o número de observações completas (ou seja, o número de pares de valores das duas variáveis). Isso acontece porque estamos calculando duas variâncias, o que diminui os graus de liberdade disponíveis para o teste em 2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>parameter</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  df 
4415 </code></pre>
</div>
</div>
<p>Podemos conferir isso contando o número de observações completas (ou seja, sem valores ausentes) nas duas variáveis que estamos correlacionando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(rendapita, consumo1) <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4417</code></pre>
</div>
</div>
</section>
<section id="p.value-ou-valor-p" class="level3" data-number="6.7.3">
<h3 data-number="6.7.3" class="anchored" data-anchor-id="p.value-ou-valor-p"><span class="header-section-number">6.7.3</span> <code>p.value</code> ou valor-p</h3>
<p>O valor-p (ou <code>p-value</code>) indica a probabilidade de observar um valor tão ou mais extremo quanto o observado, assumindo que a hipótese nula (correlação = 0) seja verdadeira. Em uma linguagem mais simples, o valor-p nos diz a probabilidade de obtermos o resultado observado ao acaso. Neste contexto, é usado como guia para decidir se a correlação observada é estatisticamente significante.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aviso
</div>
</div>
<div class="callout-body-container callout-body">
<p>ALERTA: O R arredonda os valores por padrão para algumas casas. Por isso, eu prefiro interpretar o <code>valor-p</code> a partir do resultado completo do teste apresentado no console (e não usando o valor da lista, ex. <code>resultado_cor_test$p.value</code>).</p>
</div>
</div>
<p>Neste caso, o resultado encontrado foi muito baixo, <code>p &lt; 2.2e-16</code>, indicando que é altamente improvável obter esse resultado se a correlação verdadeira fosse zero (ou seja, se não houvesse correlação entre as variáveis).</p>
<p>Isso significa que <strong>podemos rejeitar a hipótese nula (H0) de que não há correlação entre as duas variáveis</strong>.</p>
</section>
<section id="estimate" class="level3" data-number="6.7.4">
<h3 data-number="6.7.4" class="anchored" data-anchor-id="estimate"><span class="header-section-number">6.7.4</span> <code>estimate</code></h3>
<p>É a estimativa do parâmetro de interesse. No caso do teste de correlação de Pearson, é o coeficiente de correlação calculado entre as duas variáveis. Esse valor é o mesmo que calculamos anteriormente com a função <code>cor()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>estimate</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      cor 
0.6012537 </code></pre>
</div>
</div>
</section>
<section id="null.value" class="level3" data-number="6.7.5">
<h3 data-number="6.7.5" class="anchored" data-anchor-id="null.value"><span class="header-section-number">6.7.5</span> <code>null.value</code></h3>
<p>O componente <code>null.value</code> indica o valor do parâmetro sob a hipótese nula. No caso do teste de correlação de Pearson, esse valor é zero, pois a hipótese nula afirma que não há correlação entre as duas variáveis. Em usos mais avançados, poderíamos alterar esse valor, para verificar se a correlação é diferente de um valor específico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>null.value</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>correlation 
          0 </code></pre>
</div>
</div>
</section>
<section id="alternative" class="level3" data-number="6.7.6">
<h3 data-number="6.7.6" class="anchored" data-anchor-id="alternative"><span class="header-section-number">6.7.6</span> <code>alternative</code></h3>
<p>O componente <code>alternative</code> indica qual foi a hipótese alternativa testada. No caso do teste de correlação de Pearson, o valor padrão é <code>"two.sided"</code>, o que significa que estamos testando se a correlação é diferente de zero (ou seja, se há uma correlação positiva ou negativa).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>alternative</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "two.sided"</code></pre>
</div>
</div>
</section>
<section id="method" class="level3" data-number="6.7.7">
<h3 data-number="6.7.7" class="anchored" data-anchor-id="method"><span class="header-section-number">6.7.7</span> <code>method</code></h3>
<p>O componente <code>method</code> indica o método utilizado para calcular a correlação. No caso do teste de correlação de Pearson, o valor é <code>"Pearson"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>method</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Pearson's product-moment correlation"</code></pre>
</div>
</div>
</section>
<section id="data.name" class="level3" data-number="6.7.8">
<h3 data-number="6.7.8" class="anchored" data-anchor-id="data.name"><span class="header-section-number">6.7.8</span> <code>data.name</code></h3>
<p>O componente <code>data.name</code> indica o nome dos dados utilizados no teste. No caso do teste de correlação de Pearson, é uma string que contém os nomes das duas variáveis que foram correlacionadas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>data.name</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dados$rendapita and dados$consumo1"</code></pre>
</div>
</div>
</section>
<section id="conf.int" class="level3" data-number="6.7.9">
<h3 data-number="6.7.9" class="anchored" data-anchor-id="conf.int"><span class="header-section-number">6.7.9</span> <code>conf.int</code></h3>
<p>O componente <code>conf.int</code> contém o intervalo de confiança para o coeficiente de correlação. Esse intervalo é calculado com base no nível de confiança especificado (por padrão, 95%) e fornece uma faixa de valores que esperamos que contenham o verdadeiro coeficiente de correlação (lembrando que temos uma amostra de municípios, já que não temos dados para todos eles).</p>
<p>Além disso, esse elemento também indica qual foi o nível de confiança (<code>conf.level</code>) utilizado para calcular o intervalo de confiança.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>resultado_cor_test<span class="sc">$</span>conf.int</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5820832 0.6197561
attr(,"conf.level")
[1] 0.95</code></pre>
</div>
</div>
</section>
</section>
<section id="materiais-complementares" class="level2" data-number="6.8">
<h2 data-number="6.8" class="anchored" data-anchor-id="materiais-complementares"><span class="header-section-number">6.8</span> Materiais complementares</h2>
<ul>
<li>Materiais da disciplina <a href="https://jtrecenti.github.io/cdad-book/">Ciência de Dados Aplicada ao Direito II</a>:
<ul>
<li><a href="https://jtrecenti.github.io/cdad-book/08-correlacao-regressao.html">Correlação e regressão</a></li>
</ul></li>
<li>Vídeo: <a href="https://www.youtube.com/watch?v=7UGWOHF8k0Q">Correlação linear bivariada no R</a> por Fernanda Peres:</li>
</ul>
<center>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7UGWOHF8k0Q?si=k2ncM9NB1eu92S7e" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</center>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/beatrizmilz\.github\.io\/ESHT011-21-analise-dados-planejamento-territorial\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../praticas/05_intervalo-de-confianca.html" class="pagination-link" aria-label="Prática - Intervalo de confiança">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Prática - Intervalo de confiança</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../praticas/07_regressao-linear.html" class="pagination-link" aria-label="Regressão Linear">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Regressão Linear</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/edit/main/praticas/06_correlacao.qmd" class="toc-action"><i class="bi bi-github"></i>Editar essa página</a></li><li><a href="https://github.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/issues/new" class="toc-action"><i class="bi empty"></i>Criar uma issue</a></li><li><a href="https://github.com/beatrizmilz/ESHT011-21-analise-dados-planejamento-territorial/blob/main/praticas/06_correlacao.qmd" class="toc-action"><i class="bi empty"></i>Ver o código fonte</a></li></ul></div></div></div></footer></body></html>